"use strict";(self.webpackChunkomp_web=self.webpackChunkomp_web||[]).push([[94045],{28453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>o});var t=a(96540);const r={},l=t.createContext(r);function s(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(l.Provider,{value:n},e.children)}},48179:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"scripting/callbacks/OnPlayerUpdate","title":"OnPlayerUpdate","description":"Cette callback est appel\xe9e \xe0 chaque fois qu\'un client/joueur modifie son status aupr\xe8s du serveur.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/scripting/callbacks/OnPlayerUpdate.md","sourceDirName":"scripting/callbacks","slug":"/scripting/callbacks/OnPlayerUpdate","permalink":"/fr/docs/scripting/callbacks/OnPlayerUpdate","draft":false,"unlisted":false,"editUrl":"https://github.com/openmultiplayer/web/tree/master/frontend/docs/scripting/callbacks/OnPlayerUpdate.md","tags":[{"inline":true,"label":"player","permalink":"/fr/docs/tags/player"}],"version":"current","frontMatter":{"title":"OnPlayerUpdate","sidebar_label":"OnPlayerUpdate","description":"Cette callback est appel\xe9e \xe0 chaque fois qu\'un client/joueur modifie son status aupr\xe8s du serveur.","tags":["player"]},"sidebar":"docsSidebar","previous":{"title":"OnPlayerText","permalink":"/fr/docs/scripting/callbacks/OnPlayerText"},"next":{"title":"OnPlayerWeaponShot","permalink":"/fr/docs/scripting/callbacks/OnPlayerWeaponShot"}}');var r=a(74848),l=a(28453);const s={title:"OnPlayerUpdate",sidebar_label:"OnPlayerUpdate",description:"Cette callback est appel\xe9e \xe0 chaque fois qu'un client/joueur modifie son status aupr\xe8s du serveur.",tags:["player"]},o=void 0,i={},u=[{value:"Param\xe8tres",id:"param\xe8tres",level:2},{value:"Valeur de retour",id:"valeur-de-retour",level:2},{value:"Exemples",id:"exemples",level:2},{value:"Astuces",id:"astuces",level:2},{value:"Fonctions connexes",id:"fonctions-connexes",level:2}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components},{TipNPCCallbacks:a}=n;return a||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("TipNPCCallbacks",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"param\xe8tres",children:"Param\xe8tres"}),"\n",(0,r.jsx)(n.p,{children:"Cette callback est appel\xe9e \xe0 chaque fois qu'un client/joueur modifie son status aupr\xe8s du serveur. Elle est souvent utilis\xe9e pour cr\xe9er des callbacks personnalis\xe9es qui ne sont pas pr\xe9sentes nativement, telle que le changement de vie, d'armure ou le changement d'arme."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nom"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"int"})," playerid"]}),(0,r.jsx)(n.td,{children:"ID du joueur ayant envoy\xe9 un paquet au serveur"})]})})]}),"\n",(0,r.jsx)(n.h2,{id:"valeur-de-retour",children:"Valeur de retour"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"0"})," - La mise \xe0 jour du joueur ne sera pas appliqu\xe9e aux autres joueurs."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"1"})," - Indique que la mise \xe0 jour peut \xeatre trait\xe9 de fa\xe7on normale et envoy\xe9 aux autres joueurs."]}),"\n",(0,r.jsx)(n.h2,{id:"exemples",children:"Exemples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:'public OnPlayerUpdate(playerid)\n{\n    new iCurWeap = GetPlayerWeapon(playerid); // Retourne l\'arme actuelle du joueur\t\t\n    if(iCurWeap != GetPVarInt(playerid, "iCurrentWeapon")) // S\'il l\'arme \xe0 changer depuis la derni\xe8re mise \xe0 jour\n    {\n        // Appelons une callback nomm\xe9e OnPlayerChangeWeapon\n        OnPlayerChangeWeapon(playerid, GetPVarInt(playerid, "iCurrentWeapon"), iCurWeap);\n        SetPVarInt(playerid, "iCurrentWeapon", iCurWeap);//Met \xe0 jour la variable arme du joueur\n    }\n    return 1; // Envoi de la mise \xe0 jour \xe0 tous les joueurs.\n}\n \nstock OnPlayerChangeWeapon(playerid, oldweapon, newweapon)\n{\n\tnew     s[128],\n\t\toWeapon[24],\n\t\tnWeapon[24];\n \n\tGetWeaponName(oldweapon, oWeapon, sizeof(oWeapon));\n\tGetWeaponName(newweapon, nWeapon, sizeof(nWeapon));\n \n\tformat(s, sizeof(s), "Vous avez chang\xe9 votre arme de %s \xe0 %s!", oWeapon, nWeapon);\n \n\tSendClientMessage(playerid, 0xFFFFFFFF, s);\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:'public OnPlayerUpdate(playerid)\n{\n\tnew Float:fHealth;\n \n\tGetPlayerHealth(playerid, fHealth);\n \n\tif(fHealth != GetPVarFloat(playerid, "faPlayerHealth"))\n\t{\n\t    // La vie du joueur a chang\xe9 depuis la derni\xe8re mise \xe0 jour, c\'est donc bien la mise \xe0 jour qui a \xe9t\xe9 envoy\xe9e.\n\t    // V\xe9rifions s\'il a perdu ou gagn\xe9 de la vie (anti-cheat vie ? ;)) \n \n\t    if(fHealth > GetPVarFloat(playerid, "faPlayerHealth"))\n\t    {\n\t        /* Il a gagn\xe9 de la vie! Triche? */\n \n\t    }\n\t    else\n\t    {\n\t        /* Il a perdu de la vie! */\n\t    }\n \n\t    SetPVarFloat(playerid, "faPlayerHealth", fHealth);\n\t}\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"astuces",children:"Astuces"}),"\n",(0,r.jsx)(a,{}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsx)(n.p,{children:"Cette callback est appel\xe9e environ 30 fois par secondes, par joueur; \xe0 utiliser seulement quand vous savez exactement pourquoi."}),(0,r.jsx)(n.p,{children:"La fr\xe9quence \xe0 laquelle est appel\xe9e cette callback varie en fonction des joueurs, d\xe9pendant de ce que fait le joueur. La fr\xe9quence d'appel sera plus \xe9lev\xe9 quand le joueur conduira, tirera alors qu'elle sera plus basse quand le joueur sera statique."})]}),"\n",(0,r.jsx)(n.h2,{id:"fonctions-connexes",children:"Fonctions connexes"})]})}function d(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);