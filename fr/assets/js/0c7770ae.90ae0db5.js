"use strict";(self.webpackChunkomp_web=self.webpackChunkomp_web||[]).push([[25409],{44763:(e,s,r)=>{r.d(s,{A:()=>t});r(96540);var a=r(74848);const t=()=>(0,a.jsxs)("section",{className:"loading-banner",children:[(0,a.jsx)("div",{className:"loading-banner-spinner"}),(0,a.jsx)("h2",{className:"loading-banner-heading",children:"Following the damn train..."})]})},48954:(e,s,r)=>{r.d(s,{A:()=>i});var a=r(96540),t=r(74848);const n=e=>{let{text:s}=e;const[r,n]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"copy-badge-container",children:[(0,t.jsx)("span",{className:"copy-badge-text",children:s}),(0,t.jsx)("button",{className:"copy-badge-button "+(r?"copied":""),onClick:()=>{navigator.clipboard.writeText(s),n(!0),setTimeout((()=>n(!1)),2e3)},children:r?"COPIED":"COPY"})]})},i=e=>{let{server:s}=e;return(0,t.jsxs)("div",{className:"server-row-card",children:[(0,t.jsxs)("div",{className:"server-header",children:[(0,t.jsx)("a",{href:"/servers/"+s.ip,className:"server-link",children:(0,t.jsx)("h2",{className:"server-heading",children:s.hn})}),(0,t.jsxs)("div",{className:"server-badges",children:[s.pr&&(0,t.jsx)("img",{src:"/images/assets/partners.png",alt:"partner server",title:"Has partnership!",className:"server-badge-image"}),s.omp&&(0,t.jsx)("img",{src:"/images/assets/logo-light-trans.svg",alt:"open.mp server",title:"open.mp server",className:"server-badge-image"})]})]}),(0,t.jsxs)("div",{className:"server-info",children:[(0,t.jsxs)("div",{className:"server-details",children:[(0,t.jsx)("span",{className:"server-game-mode",children:s.gm}),(0,t.jsxs)("div",{className:"server-players",children:[(0,t.jsxs)("div",{className:"server-player-count",children:[(0,t.jsx)("span",{children:s.pc}),"/",(0,t.jsx)("span",{children:s.pm})]}),"players"]})]}),(0,t.jsx)(n,{text:s.ip})]})]})}},55080:(e,s,r)=>{r.d(s,{N:()=>i,P:()=>l});var a=r(96540),t=r(74848);const n=new class{listeners=[];addListener(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter((s=>s!==e))}}emit(e){this.listeners.forEach((s=>s(e)))}},i=()=>{const[e,s]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const e=n.addListener((e=>{s((s=>[e,...s])),setTimeout((()=>{s((s=>s.filter((s=>s.id!==e.id))))}),1e5)}));return()=>e()}),[]),(0,t.jsx)("div",{className:"toast-container",children:e.map((e=>(0,t.jsxs)("div",{className:"toast "+("success"===e.type?"toast-success":"toast-error"),children:[(0,t.jsxs)("div",{className:"toast-header",children:[(0,t.jsx)("h4",{className:"toast-title",children:e.title}),(0,t.jsx)("button",{onClick:()=>s((s=>s.filter((s=>s.id!==e.id)))),className:"toast-close","aria-label":"Close toast",children:"\xd7"})]}),(0,t.jsx)("p",{className:"toast-message",children:e.message})]},e.id)))})},l=e=>{let{message:s,title:r,type:a="success"}=e;const t={id:Math.random().toString(36).substr(2,9),message:s,title:r,type:a};n.emit(t)}},57031:(e,s,r)=>{r.d(s,{Y:()=>a});const a="https://api.open.mp"},72300:(e,s,r)=>{r.r(s),r.d(s,{default:()=>C});var a=r(51410),t=r(5947),n=r.n(t),i=r(96540),l=r(75723),c=r(44763),o=r(48954),d=r(55080),h=r(57031),m=r(74848);const v=async e=>{try{const s=await fetch((e=>`${h.Y}/servers/${e}`)(e));return await s.json()}catch(s){return}},p=e=>{let{to:s}=e;return(0,m.jsx)("a",{href:s,className:"button server-info-back-link",children:"\u2190 Back to Servers"})},x=e=>{let{address:s}=e;return(0,m.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"server-info-link",children:(0,m.jsxs)("button",{className:"server-info-quick-join-button",children:["Quick Join",(0,m.jsx)("span",{className:"server-info-arrow",children:"\u2192"})]})})},u=e=>{let{data:s}=e;return(0,m.jsx)("article",{className:"server-info-wrapper",children:(0,m.jsx)("div",{className:"server-info-container",children:(0,m.jsxs)("div",{className:"server-info-box",children:[(0,m.jsxs)("div",{className:"server-info-header",children:[(0,m.jsx)("span",{className:"server-info-game-mode",children:s.core.gm}),(0,m.jsx)("a",{href:`samp://${s.dm??s.ip}`,target:"_blank",rel:"noopener noreferrer",className:"server-info-ip-address",children:s.dm??s.ip})]}),(0,m.jsx)("h1",{className:"server-info-name",children:s.core.hn}),(0,m.jsx)("p",{className:"server-info-description",children:s.description||"This server has no description"}),(0,m.jsxs)("div",{className:"row server-info-content-wrapper",children:[(0,m.jsxs)("div",{className:"server-info-stats-section",children:[(0,m.jsxs)("div",{className:"server-info-stat-item",children:[(0,m.jsx)("span",{className:"server-info-stat-label",children:"Players Online"}),(0,m.jsxs)("span",{className:"server-info-stat-value",children:[s.core.pc,"/",s.core.pm]})]}),(0,m.jsxs)("div",{className:"server-info-stat-item",children:[(0,m.jsx)("span",{className:"server-info-stat-label",children:"Mod Version"}),(0,m.jsx)("span",{className:"server-info-stat-value",children:s.core.vn})]}),(0,m.jsxs)("div",{className:"server-info-stat-item",children:[(0,m.jsx)("span",{className:"server-info-stat-label",children:"Language"}),(0,m.jsx)("span",{className:"server-info-stat-value",children:s.core.la})]}),(0,m.jsx)(x,{address:`samp://${s.dm??s.ip}`})]}),s.ru&&(0,m.jsx)("div",{className:"server-info-rules-section",children:(0,m.jsxs)("table",{className:"server-info-rules-table",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Rule"}),(0,m.jsx)("th",{children:"Value"})]})}),(0,m.jsx)("tbody",{children:Object.entries(s.ru).map((e=>{let[s,r]=e;return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:s}),(0,m.jsx)("td",{children:r})]},s)}))})]})})]}),(0,m.jsx)("div",{className:"server-info-divider"}),(0,m.jsx)("div",{className:"server-info-footer",children:(0,m.jsxs)("time",{className:"server-info-last-updated",children:["Last updated"," ",N(new Date(s.lastUpdated),new Date)," ago"]})})]})})})},j=e=>{let{ip:s}=e;const[r,a]=(0,i.useState)(!0),[t,n]=(0,i.useState)(void 0);return(0,i.useEffect)((()=>{v(s).then((e=>{a(!1),n(e)}))}),[]),!t||r?(0,m.jsx)(c.A,{}):(0,m.jsx)(u,{data:t})},f=e=>{let{ip:s}=e;return s?(0,m.jsx)(a.A,{title:s,description:"Server Information for "+s,children:(0,m.jsx)("section",{className:"server-info-section",children:(0,m.jsxs)("div",{className:"server-info-stack",children:[(0,m.jsx)(p,{to:"/servers"}),(0,m.jsx)(j,{ip:s})]})})}):(0,m.jsx)(c.A,{})},N=function(e,s){void 0===s&&(s=new Date);const r=e instanceof Date?e:new Date(e),a=(s instanceof Date?s:new Date(s)).getTime()-r.getTime(),t=Math.abs(a),n=Math.floor(t/1e3),i=Math.floor(n/60),l=Math.floor(i/60),c=Math.floor(l/24),o=Math.floor(c/30),d=Math.floor(c/365),h=(e,s)=>1===e?`1 ${s}`:`${e} ${s}s`;return d>0?h(d,"year"):o>0?h(o,"month"):c>0?h(c,"day"):l>0?h(l,"hour"):i>0?h(i,"minute"):"less than a minute"},b=`${h.Y}/servers/`,g=e=>({players:e.map((e=>e.pc)).reduce(((e,s)=>e+s),0),servers:e.length}),y=e=>{let{stats:{players:s,servers:r}}=e;return(0,m.jsx)("div",{className:"servers-center",children:(0,m.jsxs)("p",{className:"servers-stats",children:[(0,m.jsx)("strong",{children:s})," players on ",(0,m.jsx)("strong",{children:r})," servers with an average of ",(0,m.jsx)("strong",{children:(s/r).toFixed(1)})," ","players per server."]})})},w=e=>{let{onAdd:s}=e;const[r,a]=(0,i.useState)("");return(0,m.jsx)("form",{action:b,target:"_self",method:"post",onSubmit:async e=>{try{e.preventDefault(),n().start();const a=await fetch(b,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:r})});if(n().inc(),200===a.status){const e=await a.json();s(e),(0,d.P)({message:`${e.core.hn} is added to our pending list. If it's not available after maximum 48 hours, you can contact us on Discord!`,title:"Server Submitted!",type:"success"})}else{const e=await a.json();(0,d.P)({message:`Status ${a.statusText}: ${e?.error}`,title:"Submission failed!",type:"error"})}}catch(a){(0,d.P)({message:"An error occurred while submitting the server",title:"Error",type:"error"})}finally{n().done()}},className:"servers-form",children:(0,m.jsxs)("div",{className:"servers-input-group",children:[(0,m.jsx)("input",{type:"text",name:"address",placeholder:"IP/Domain",value:r,onChange:e=>a(e.target.value),className:"servers-input"}),(0,m.jsx)("button",{type:"submit",className:"button button--primary button--md2",children:"Add"})]})})},k=e=>{let{isOpen:s,onClose:r,children:a}=e;return s?(0,m.jsxs)("div",{className:"servers-modal-overlay",children:[(0,m.jsx)("div",{className:"servers-modal-backdrop",onClick:r}),(0,m.jsx)("div",{className:"servers-modal-content",children:a})]}):null},S=e=>{let{data:s}=e;const[r,a]=(0,i.useState)(""),[t,n]=(0,i.useState)(!0),[c,d]=(0,i.useState)(!1),[h,v]=(0,i.useState)(!1),[p,x]=(0,i.useState)("relevance"),[u,j]=(0,i.useState)(!1),f=(0,i.useMemo)((()=>((e,s)=>{let r=[...e];if(s.search){const e=s.search.toLowerCase();r=r.filter((s=>s.ip.toLowerCase().includes(e)||s.hn.toLowerCase().includes(e)||s.gm.toLowerCase().includes(e)))}return s.showEmpty||(r=r.filter((e=>e.pc>0))),s.showPartnersOnly&&(r=r.filter((e=>!0===e.pr))),s.showOmpOnly&&(r=r.filter((e=>!0===e.omp))),"pc"===s.sort&&r.sort(((e,s)=>s.pc-e.pc)),r})(s,{search:r,showEmpty:t,showPartnersOnly:c,showOmpOnly:h,sort:p})),[s,r,t,c,h,p]),N=Math.floor(1e3/134);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("form",{className:"servers-list-form",children:[(0,m.jsxs)("div",{className:"servers-controls",children:[(0,m.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"servers-select",children:[(0,m.jsx)("option",{value:"relevance",children:"Relevance"}),(0,m.jsx)("option",{value:"pc",children:"Players"})]}),(0,m.jsx)("input",{type:"text",placeholder:"Search by IP or Name",name:"search",id:"search",value:r,onChange:e=>a(e.target.value),className:"servers-search"}),(0,m.jsx)("button",{type:"button",onClick:()=>j(!0),className:"button button--primary button--md2",children:"Add server"})]}),(0,m.jsxs)("div",{className:"servers-checkboxes",children:[(0,m.jsxs)("label",{className:"servers-checkbox-label",children:[(0,m.jsx)("input",{type:"checkbox",checked:t,onChange:e=>n(e.target.checked),className:"servers-checkbox"}),"Show empty servers"]}),(0,m.jsxs)("label",{className:"servers-checkbox-label",children:[(0,m.jsx)("input",{type:"checkbox",checked:h,onChange:e=>v(e.target.checked),className:"servers-checkbox"}),"Show only open.mp servers"]}),(0,m.jsxs)("label",{className:"servers-checkbox-label",children:[(0,m.jsx)("input",{type:"checkbox",checked:c,onChange:e=>d(e.target.checked),className:"servers-checkbox"}),"Show only partners"]})]})]}),(0,m.jsx)(y,{stats:g(s)}),(0,m.jsx)(l.Y1,{height:134*(f.length+1),width:"100%",itemSize:134,itemCount:f.length,overscanCount:N,children:e=>{let{index:s,style:r}=e;const a=f[s];return(0,m.jsx)("div",{style:r,children:(0,m.jsx)(o.A,{server:a},a.ip)})}}),(0,m.jsxs)(k,{isOpen:u,onClose:()=>j(!1),children:[(0,m.jsxs)("div",{className:"servers-modal-header",children:[(0,m.jsx)("h2",{className:"servers-modal-title",children:"Add a server"}),(0,m.jsx)("button",{onClick:()=>j(!1),className:"servers-modal-close",children:"\xd7"})]}),(0,m.jsxs)("div",{className:"servers-modal-body",children:[(0,m.jsx)("label",{className:"servers-label",children:"IP or Domain"}),(0,m.jsx)(w,{onAdd:e=>{j(!1)}}),(0,m.jsxs)("p",{className:"servers-helper-text",children:["IP must be in format ",(0,m.jsx)("strong",{children:"ip:port"})]})]}),(0,m.jsx)("div",{className:"servers-modal-footer",children:(0,m.jsx)("button",{onClick:()=>j(!1),className:"button button--primary button--md2",children:"Close"})})]})]})},C=()=>{if("undefined"!=typeof window&&window.location&&window.location.pathname&&window.location.pathname.includes(":")){const e=window.location.pathname.split("/servers/")[1];return(0,m.jsx)(f,{ip:e})}const[e,s]=(0,i.useState)(!0),[r,t]=(0,i.useState)([]);return(0,i.useEffect)((()=>{(async()=>{try{const e=await fetch(b);return await e.json()}catch(e){return[]}})().then((e=>{s(!1),t(e)}))}),[]),(0,m.jsxs)("div",{children:[(0,m.jsx)(a.A,{title:"Servers",description:"List of San Andreas servers using open.mp or SA-MP",children:(0,m.jsx)("section",{className:"servers-container",children:e?(0,m.jsx)(c.A,{}):(0,m.jsx)(S,{data:r})})}),(0,m.jsx)(d.N,{})]})}}}]);