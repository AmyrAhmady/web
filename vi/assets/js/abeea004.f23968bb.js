"use strict";(self.webpackChunkomp_web=self.webpackChunkomp_web||[]).push([[12959],{28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>l});var a=t(96540);const i={},c=a.createContext(i);function r(n){const e=a.useContext(c);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),a.createElement(c.Provider,{value:e},n.children)}},39319:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>h,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"scripting/callbacks/OnPlayerUpdate","title":"OnPlayerUpdate","description":"Callback n\xe0y \u0111\u01b0\u1ee3c g\u1ecdi m\u1ed7i khi m\u1ed9t client/ng\u01b0\u1eddi ch\u01a1i c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i c\u1ee7a m\xecnh v\u1edbi server.","source":"@site/i18n/vi/docusaurus-plugin-content-docs/current/scripting/callbacks/OnPlayerUpdate.md","sourceDirName":"scripting/callbacks","slug":"/scripting/callbacks/OnPlayerUpdate","permalink":"/vi/docs/scripting/callbacks/OnPlayerUpdate","draft":false,"unlisted":false,"editUrl":"https://github.com/openmultiplayer/web/tree/master/frontend/docs/scripting/callbacks/OnPlayerUpdate.md","tags":[{"inline":true,"label":"player","permalink":"/vi/docs/tags/player"}],"version":"current","frontMatter":{"title":"OnPlayerUpdate","sidebar_label":"OnPlayerUpdate","description":"Callback n\xe0y \u0111\u01b0\u1ee3c g\u1ecdi m\u1ed7i khi m\u1ed9t client/ng\u01b0\u1eddi ch\u01a1i c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i c\u1ee7a m\xecnh v\u1edbi server.","tags":["player"]},"sidebar":"docsSidebar","previous":{"title":"OnPlayerText","permalink":"/vi/docs/scripting/callbacks/OnPlayerText"},"next":{"title":"OnPlayerWeaponShot","permalink":"/vi/docs/scripting/callbacks/OnPlayerWeaponShot"}}');var i=t(74848),c=t(28453);const r={title:"OnPlayerUpdate",sidebar_label:"OnPlayerUpdate",description:"Callback n\xe0y \u0111\u01b0\u1ee3c g\u1ecdi m\u1ed7i khi m\u1ed9t client/ng\u01b0\u1eddi ch\u01a1i c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i c\u1ee7a m\xecnh v\u1edbi server.",tags:["player"]},l=void 0,h={},o=[{value:"M\xf4 t\u1ea3",id:"m\xf4-t\u1ea3",level:2},{value:"Gi\xe1 tr\u1ecb tr\u1ea3 v\u1ec1",id:"gi\xe1-tr\u1ecb-tr\u1ea3-v\u1ec1",level:2},{value:"V\xed d\u1ee5",id:"v\xed-d\u1ee5",level:2},{value:"Ghi ch\xfa",id:"ghi-ch\xfa",level:2}];function s(n){const e={admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...n.components},{TipNPCCallbacks:t}=e;return t||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("TipNPCCallbacks",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"m\xf4-t\u1ea3",children:"M\xf4 t\u1ea3"}),"\n",(0,i.jsx)(e.p,{children:"Callback n\xe0y \u0111\u01b0\u1ee3c g\u1ecdi m\u1ed7i khi m\u1ed9t client/ng\u01b0\u1eddi ch\u01a1i c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i c\u1ee7a m\xecnh v\u1edbi server. N\xf3 th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 t\u1ea1o c\xe1c callback t\xf9y ch\u1ec9nh cho c\xe1c c\u1eadp nh\u1eadt t\u1eeb client m\xe0 kh\xf4ng \u0111\u01b0\u1ee3c server theo d\xf5i t\xedch c\u1ef1c, ch\u1eb3ng h\u1ea1n nh\u01b0 c\u1eadp nh\u1eadt s\u1ee9c kh\u1ecfe ho\u1eb7c \xe1o gi\xe1p ho\u1eb7c khi ng\u01b0\u1eddi ch\u01a1i thay \u0111\u1ed5i v\u0169 kh\xed."}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"T\xean"}),(0,i.jsx)(e.th,{children:"M\xf4 t\u1ea3"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"playerid"}),(0,i.jsx)(e.td,{children:"ID c\u1ee7a ng\u01b0\u1eddi ch\u01a1i g\u1eedi g\xf3i c\u1eadp nh\u1eadt."})]})})]}),"\n",(0,i.jsx)(e.h2,{id:"gi\xe1-tr\u1ecb-tr\u1ea3-v\u1ec1",children:"Gi\xe1 tr\u1ecb tr\u1ea3 v\u1ec1"}),"\n",(0,i.jsx)(e.p,{children:"0 - C\u1eadp nh\u1eadt t\u1eeb ng\u01b0\u1eddi ch\u01a1i n\xe0y s\u1ebd kh\xf4ng \u0111\u01b0\u1ee3c nh\xe2n r\u1ed9ng cho c\xe1c client kh\xe1c."}),"\n",(0,i.jsx)(e.p,{children:"1 - Ch\u1ec9 ra r\u1eb1ng c\u1eadp nh\u1eadt n\xe0y c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c x\u1eed l\xfd b\xecnh th\u01b0\u1eddng v\xe0 g\u1eedi \u0111\u1ebfn c\xe1c ng\u01b0\u1eddi ch\u01a1i kh\xe1c."}),"\n",(0,i.jsx)(e.p,{children:"N\xf3 lu\xf4n \u0111\u01b0\u1ee3c g\u1ecdi \u0111\u1ea7u ti\xean trong filterscripts."}),"\n",(0,i.jsx)(e.h2,{id:"v\xed-d\u1ee5",children:"V\xed d\u1ee5"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"V\xed d\u1ee5 1"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'new WEAPON:gPlayerCurrentWeapon[MAX_PLAYERS];\n\npublic OnPlayerUpdate(playerid)\n{\n    new WEAPON:weapon = GetPlayerWeapon(playerid); // Tr\u1ea3 v\u1ec1 v\u0169 kh\xed hi\u1ec7n t\u1ea1i c\u1ee7a ng\u01b0\u1eddi ch\u01a1i\n    if (weapon != gPlayerCurrentWeapon[playerid]) // N\u1ebfu anh ta \u0111\xe3 thay \u0111\u1ed5i v\u0169 kh\xed k\u1ec3 t\u1eeb l\u1ea7n c\u1eadp nh\u1eadt tr\u01b0\u1edbc\n    {\n        // G\u1ecdi m\u1ed9t callback c\xf3 t\xean l\xe0 OnPlayerWeaponChange\n        CallLocalFunction("OnPlayerWeaponChange", "iii", playerid, gPlayerCurrentWeapon[playerid], weapon);\n        gPlayerCurrentWeapon[playerid] = weapon; // C\u1eadp nh\u1eadt bi\u1ebfn v\u0169 kh\xed\n    }\n    return 1; // G\u1eedi c\u1eadp nh\u1eadt n\xe0y cho c\xe1c ng\u01b0\u1eddi ch\u01a1i kh\xe1c.\n}\n\nforward OnPlayerWeaponChange(playerid, WEAPON:oldWeapon, WEAPON:newWeapon);\npublic OnPlayerWeaponChange(playerid, WEAPON:oldWeapon, WEAPON:newWeapon)\n{\n    new \n        string[128],\n        oldWeaponName[24],\n        newWeaponName[24];\n\n    GetWeaponName(oldWeapon, oldWeaponName, sizeof(oldWeaponName));\n    GetWeaponName(newWeapon, newWeaponName, sizeof(newWeaponName));\n\n    format(string, sizeof(string), "B\u1ea1n \u0111\xe3 thay \u0111\u1ed5i v\u0169 kh\xed t\u1eeb %s sang %s!", oldWeaponName, newWeaponName);\n    SendClientMessage(playerid, 0xFFFFFFFF, string);\n    return 1;\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"V\xed d\u1ee5 2"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'public OnPlayerUpdate(playerid)\n{\n    new Float:fHealth;\n    GetPlayerHealth(playerid, fHealth);\n\n    if (fHealth != GetPVarFloat(playerid, "faPlayerHealth"))\n    {\n        // S\u1ee9c kh\u1ecfe c\u1ee7a ng\u01b0\u1eddi ch\u01a1i \u0111\xe3 thay \u0111\u1ed5i k\u1ec3 t\u1eeb l\u1ea7n c\u1eadp nh\u1eadt tr\u01b0\u1edbc -> server, v\xec v\u1eady r\xf5 r\xe0ng \u0111\xe2y l\xe0 \u0111i\u1ec1u \u0111\xe3 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt.\n        // Th\u1ef1c hi\u1ec7n c\xe1c ki\u1ec3m tra th\xeam \u0111\u1ec3 xem anh ta \u0111\xe3 m\u1ea5t ho\u1eb7c t\u0103ng s\u1ee9c kh\u1ecfe, ch\u1ed1ng gian l\u1eadn s\u1ee9c kh\u1ecfe? ;)\n\n        if (fHealth > GetPVarFloat(playerid, "faPlayerHealth"))\n        {\n            /* Anh ta \u0111\xe3 t\u0103ng s\u1ee9c kh\u1ecfe! Gian l\u1eadn? Vi\u1ebft c\xe1c script c\u1ee7a b\u1ea1n \u1edf \u0111\xe2y \u0111\u1ec3 t\xecm ra c\xe1ch m\xe0 ng\u01b0\u1eddi ch\u01a1i \u0111\xe3\n            t\u0103ng s\u1ee9c kh\u1ecfe! */\n        }\n        else\n        {\n            /* Anh ta \u0111\xe3 m\u1ea5t s\u1ee9c kh\u1ecfe! */\n        }\n\n        SetPVarFloat(playerid, "faPlayerHealth", fHealth);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"ghi-ch\xfa",children:"Ghi ch\xfa"}),"\n",(0,i.jsx)(t,{}),"\n",(0,i.jsx)(e.admonition,{type:"warning",children:(0,i.jsx)(e.p,{children:"Callback n\xe0y \u0111\u01b0\u1ee3c g\u1ecdi, trung b\xecnh, 30 l\u1ea7n m\u1ed7i gi\xe2y, m\u1ed7i ng\u01b0\u1eddi ch\u01a1i; ch\u1ec9 s\u1eed d\u1ee5ng n\xf3 khi b\u1ea1n bi\u1ebft m\u1ee5c \u0111\xedch c\u1ee7a n\xf3 (ho\u1eb7c quan tr\u1ecdng h\u01a1n l\xe0 nh\u1eefng g\xec n\xf3 KH\xd4NG \u0111\u01b0\u1ee3c d\xf9ng cho). T\u1ea7n su\u1ea5t m\xe0 callback n\xe0y \u0111\u01b0\u1ee3c g\u1ecdi cho m\u1ed7i ng\u01b0\u1eddi ch\u01a1i thay \u0111\u1ed5i t\xf9y thu\u1ed9c v\xe0o nh\u1eefng g\xec ng\u01b0\u1eddi ch\u01a1i \u0111ang l\xe0m. L\xe1i xe ho\u1eb7c b\u1eafn s\u1ebd k\xedch ho\u1ea1t nhi\u1ec1u c\u1eadp nh\u1eadt h\u01a1n so v\u1edbi vi\u1ec7c \u0111\u1ee9ng im."})})]})}function p(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(s,{...n})}):s(n)}}}]);